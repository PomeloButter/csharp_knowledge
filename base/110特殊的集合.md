# 特殊的集合
<!-- TOC -->

- [特殊的集合](#特殊的集合)
    - [概述](#概述)
    - [处理位](#处理位)
        - [BitArray类](#bitarray类)
        - [BitVector32结构](#bitvector32结构)

<!-- /TOC -->

## 概述
- 本章介绍特殊的集合，例如，处理位的集合、改变时可以观察的集合、不能改变的集合、以及可以在多个线程中同时访问的集合。

---
## 处理位
- 如果需要处理的数字有许多位，就可以使用BitArray类和BitVector32结构。这两种类型最重要的区别是，BitArray类可以重新设置大小，如果事先不知道位数，就可以使用BitArray类，他可以包含非常多的位。BitVector32是基于栈的，因此比较快。BitVector32仅包含32位，存储在一个整数中。

### BitArray类
- BitArray类是一个引用类型，它包含一个int数组，其中每32位使用一个新整数。这个类的成员如表所示：
    - Count 返回数组中的位数
    - Length 可以定义新的数组大小，重新设置集合的大小
    - Item Get Set 可以使用索引器读写数组中的位，索引器是布尔类型。除了使用索引器外，还可以使用Get和Set访问数组中的位。
    - SetAll 设置所有位的值
    - Not 对所有位取反
    - And Or Xor 与 或 异或。可以对其他BitArray对象操作，修改当前BitArray对象。即B1.And(B2)，结果是B1被修改。


- 使用代码如下：
```
BitArray bitArray = new BitArray(32);
bool bit2 = bitArray[2];
bool bit3 = bitArray[3];
bitArray.Set(2, true);
bitArray[3] = true;
bitArray.SetAll(true);
bitArray.Not();
```

### BitVector32结构
- 如果实现知道需要的位数，就可以使用BitVector32替代BitArray。一个BitVector32可以存储32位，如果需要更多位，可以使用多个BitVector32。
- 成员如下：
    - Data 把BitVector32结构中的数据返回为整数
    - Item 可以使用索引器设置值。索引器是重载的：可以使用掩码或BitVector32.Section类型的片段来获取和设置值。
    - CreateMask 静态方法，用于为访问BitVector32结构中的特定位创建掩码。
    - CreateSection 静态方法，用于创建32位中的几个片段

-